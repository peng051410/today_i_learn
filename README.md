- [[Quick history](https://github.githistory.xyz/peng051410/today_i_learn/blob/main/README.org)](#org11f4ec7)
- [[English](./english/vocabulary.md)](#org98922a2)
- [Command line](#org6d64454)
  - [打印文本第一行](#orgda92fe5)
  - [获取文本最后一列](#org75d57be)
  - [Delete all broken soft link](#orgd7efffc)
  - [Rotate a image](#org4648461)
  - [Nohup to file and console](#org912169b)
  - [检验文件或者文件夹是否存在](#org7dbb55a)
    - [判断文件是否存在](#org908c4d3)
    - [判断文件夹是否存在](#org261780f)
    - [判断软链接存在并且可用虽](#org43407a7)
    - [判断文件夹不存在](#orged3ff59)
  - [获取本机ip](#orgf6c29dc)
  - [Delete file expect few files](#org84376a5)
  - [Sync file from source to target increment](#orgd5da343)
  - [How to get Maven project version from cmd](#org595537e)
  - [Maven use alternative repo](#org46b29d1)
  - [Scp with port](#org3fa6d97)
  - [Check url exist](#org3f2c649)
    - [Method1](#org5b0e1e7)
    - [Method2](#orgf12fd76)
  - [Get host ip](#org975cf9e)
  - [Generate short link](#org5e08812)
  - [Get weather](#org07c6304)
  - [Pass passphrase to gpg](#org67da779)
  - [Where xhost](#org279882d)
  - [Display custom date](#org39bcea2)
  - [Extract filename and extension from file](#org5244b43)
  - [Truncate file](#orge41bcf3)
    - [In-place](#org7e37aae)
    - [New file](#org2230ffb)
  - [Cut file](#orgb2772b8)
- [Emacs](#orgb9bac7e)
  - [给Emacs文档增加目录](#org66ae86d)
  - [Add command to keyboard macro](#orga2e98d4)
  - [Set major mode on file](#orgd452234)
  - [Add minor mode on file](#orgddf36e2)
  - [Straight use builtin org](#org59a5ec8)
  - [Delete blank line](#orge65b62b)
  - [Insert file contents to org source area](#orgf3f264f)
  - [Add note to blog](#org90790cc)
  - [Yas add custom style date](#orgf88f777)
  - [Change org babel export language](#orge9f63d1)
  - [Ignore error info](#org1eb21c4)
  - [Org babel python output always Nono](#org302e99a)
  - [Handle swiper search result](#orgc2935dc)
  - [Change org reveal font color](#org0161a4e)
  - [So-long mode](#org8388de1)
  - [Trim changed line white space](#orgf2b7461)
  - [Open chrome-extension: prefix url](#org807e2cf)
  - [Copy rectangle area content](#org58959a3)
  - [Insert stuff like vi column mode but with string-rectangle](#org9c5a0b2)
- [Org hugo add shortcode](#org31320a8)
    - [[Shortcodes — ox-hugo - Org to Hugo exporter](https://ox-hugo.scripter.co/doc/shortcodes/)](#orgf41bf16)
    - [[使用Shortcodes在Hugo博客中优雅的嵌入B站视频 – Yu's Blog](https://blog.iyu.icu/posts/shortcode_bilibili/)](#org5fc6c0a)
  - [Batch modify file name in emacs](#org01a6707)
- [git](#org0cc1ec4)
  - [查看git配置的来源](#orgc551853)
  - [删除大于指定大小的仓库信息](#orga568322)
  - [Rebase user info](#org6a117a5)
  - [Migrate code to new origin](#org7a1c981)
  - [Remove untracked file](#orge8f39c8)
  - [How to clone git repo wiki](#org480ca67)
    - [clone today\_i\_learn repo](#org274269d)
    - [clone today\_i\_learn repo wiki](#org14e0953)
  - [Create new repo from other existing repo branch](#orgc0335ba)
    - [[git - How do I create a new GitHub repo from a branch in an existing repo? - Stack Overflow](https://stackoverflow.com/questions/9527999/how-do-i-create-a-new-github-repo-from-a-branch-in-an-existing-repo)](#org6497f60)
- [Github](#org3fa0a74)
  - [Add profile page to github](#org4585cd4)
  - [Github emoji shortcode](#org99b0ff3)
- [JAVA](#org0d1ab8d)
  - [How to judge byte[] is compressed with gzip](#org6c2ac13)
  - [Jenv export java\_home](#orgff0e72a)
  - [Iterable to list](#org1faa5fe)
  - [JVM](#orge3ebf69)
    - [Show java program jvm params](#orgc7df3f5)
    - [Why set -XX:NativeMemoryTracking=detail got ative memory tracking is not enabled](#org7a5802c)
  - [Get two date interval days by java8](#org3822ab2)
  - [Convert Milliseconds to LocalDateTime](#orgce7c485)
  - [Convert LocalDate to Milliseconds](#org0812626)
  - [com.google.protobuf.GeneratedMessageV3.isStringEmpty not found](#orgc371a95)
  - [Get returntype by aspectj joinpoint](#org83f236a)
  - [SpringFlux+Netty config access log](#org0e3aecf)
    - [add netty system param](#orgc5577ed)
    - [config log4j for access log](#orga9c179d)
- [Spring](#org90149a2)
  - [How to get handleMethod from webflux](#org5e1dfdd)
  - [Spring profie effect scope](#org07e494b)
- [KM](#org7d201ca)
  - [How to show km error log](#org0569b9b)
- [Python](#org4798989)
  - [python with git](#orge4f67dd)
  - [python with clipboard](#org87dd03c)
  - [python urldecode](#org689cf03)
  - [python with cross-platform home directory](#org1fbf118)
  - [python set to string](#orgfe81347)
  - [python decimal to binary](#org5c0dcaa)
- [Brew](#orgee618f3)
  - [get installed program path](#org3a2b0d0)
  - [handle rebase-apply error](#org8d76f62)
  - [Make brew python and pyenv togehter](#org0daaefb)
  - [fixed font exists in multiple taps](#org576b730)
  - [Clean brew cache](#org3b4e5da)
- [MAC](#orgdead379)
  - [del macOS Xcode CoreSimulator folder](#org2735d96)
  - [Brew mysql install connect issue](#org93a6e89)
  - [Mount/unmount smbs](#org9f5bb84)
  - [Get running app](#org2e349c1)
  - [Reset macos accessibility](#org16743b7)
- [Linux](#org3f050df)
  - [Change default program](#org9f0582c)
  - [SSH paswordless with public key authentication](#orgce3b0b7)
    - [Generate key from host](#orgea6540f)
    - [Scp to dest machine](#org5831c32)
    - [Add pub key to dest machine auth key](#orgf649689)
  - [Man with color](#org8a0edd8)
- [Mysql](#org1bd2ef6)
  - [Show db table create/update time](#org8b350c9)
- [IDEA](#orgcf79f49)
  - [Use alt key quickly on commit window](#orgd696048)
- [Convert vvt to srt](#org22ba190)
- [Save video part stuff](#org0cf8093)
- [JACKSON](#org6da1b58)
  - [JsonNode to class](#orga92882d)
  - [Json to Map](#org322f530)
  - [Unwarp map](#org7bd32f0)
- [Redis](#orge7234ae)
  - [Batch del key](#orga02c961)
  - [Find big key](#org90222ef)
- [Nginx](#org61fdb7d)
  - [underscore header issue](#orgf296494)
- [Wexin develop](#orgc9e17da)
  - [[微信模板消息换行 - Jinx - CSDN博客](https://blog.csdn.net/medivhq/article/details/49659971)](#orge440656)
  - [[微信公众号开发者模式回复信息带表情（QQ，emoji） - X\_hazel的博客 - CSDN博客](https://blog.csdn.net/X_hazel/article/details/85206241)](#orgba5fbb6)
- [JS](#orgee87df3)
  - [Get table td content](#orgf632cd4)



<a id="org11f4ec7"></a>

# [Quick history](https://github.githistory.xyz/peng051410/today_i_learn/blob/main/README.org)


<a id="org98922a2"></a>

# [English](./english/vocabulary.md)


<a id="org6d64454"></a>

# Command line


<a id="orgda92fe5"></a>

## 打印文本第一行

```sh
awk 'NR==1{print}' filename
```


<a id="org75d57be"></a>

## 获取文本最后一列

主要是$NF

```sh
awk -F ',' '{print $NF}'
```


<a id="orgd7efffc"></a>

## Delete all broken soft link

```sh
find -L . -name . -o -type d -prune -o -type l -exec rm {} +
```


<a id="org4648461"></a>

## Rotate a image

```sh
function ro() {
    szFile=$1
    convert $1 -rotate 90 $(basename "$szFile").png
}
```


<a id="org912169b"></a>

## Nohup to file and console

```sh
nohup ./program  > Output.txt | tail -F Output.txt &
```


<a id="org7dbb55a"></a>

## 检验文件或者文件夹是否存在


<a id="org908c4d3"></a>

### 判断文件是否存在

```sh
if [ -e x.txt ]
then
    echo "ok"
else
    echo "nok"
fi
```


<a id="org261780f"></a>

### 判断文件夹是否存在

```sh
if [ -d folder1 ]
then
    echo "ok"
else
    echo "nok"
fi
```


<a id="org43407a7"></a>

### 判断软链接存在并且可用虽

```sh
[ -L ${my_link} ] && [ -e ${my_link} ]
```


<a id="orged3ff59"></a>

### 判断文件夹不存在

```sh

```


<a id="orgf6c29dc"></a>

## 获取本机ip

```sh
ifconfig | grep -Eo 'inet (addr:)?([0-9]*\.){3}[0-9]*' | grep -Eo '([0-9]*\.){3}[0-9]*' | grep -v '127.0.0.1'
# linux only
hostname -i
```


<a id="org84376a5"></a>

## Delete file expect few files

```sh
rm -v !("filname1"|"file2")
```


<a id="orgd5da343"></a>

## Sync file from source to target increment

```sh
rsync -av Documents/* /tmp/documents
```


<a id="org595537e"></a>

## How to get Maven project version from cmd

```sh
mvn -q -Dexec.executable=echo -Dexec.args='${project.artifactId}' --non-recursive exec:
```


<a id="org46b29d1"></a>

## Maven use alternative repo

```sh
mvn -DaltDeploymentRepository=repoid::default::http://ip/nexus/content/repositories/releases clean source:jar-no-fork deploy
```


<a id="org3fa6d97"></a>

## Scp with port

```sh
scp -P 2222 file host@localhost:~/linux-study
```


<a id="org3f2c649"></a>

## Check url exist


<a id="org5b0e1e7"></a>

### Method1

```sh
url=http://www.baidu.co
if wget --spider $url 2>/dev/null; then
  echo "File exists"
else
  echo "File does not exist"
fi
```


<a id="orgf12fd76"></a>

### Method2

```sh
url=http://www.baidu.co
if wget -q --method=HEAD $url;
 then
  echo "This page exists."
 else
  echo "This page does not exist."
fi
```


<a id="org975cf9e"></a>

## Get host ip

```sh
curl ipaddy.net
```


<a id="org5e08812"></a>

## Generate short link

```sh
curl -s 'tinyurl.com/api-create.php?url=http://www.baidu.com'
```


<a id="org07c6304"></a>

## Get weather

```sh
curl wttr.in
```


<a id="org67da779"></a>

## Pass passphrase to gpg

[shell script - gpg asks for password even with &#x2013;passphrase - Unix & Linux Stack Exchange](https://unix.stackexchange.com/questions/60213/gpg-asks-for-password-even-with-passphrase)

```sh
gpg -c --batch --passphrase 1234 -o file.gpg
```


<a id="org279882d"></a>

## Where xhost

[x11 - xhost on MacOS Catalina - Ask Different](https://apple.stackexchange.com/questions/378348/xhost-on-macos-catalina)

```sh
/opt/X11/bin/xhost
```


<a id="org39bcea2"></a>

## Display custom date

显示3小时之前的时间

```sh
date -d '3 hours ago' +"%Y-%m-%d %T"
# another way
date -d "-3 Hours" "+%Y-%m-%d %T"
```


<a id="org5244b43"></a>

## Extract filename and extension from file

<https://stackoverflow.com/questions/965053/extract-filename-and-extension-in-bash?page=1&tab=scoredesc#tab-top>

```sh
fullfile=~/Downloads/main-webapp_log_Onl_jar_backend.yml
filename=$(basename -- "$fullfile")
extension="${filename##*.}"
filename="${filename%.*}"
echo "filanme is $filename, file extendsion is $extension"
```


<a id="orge41bcf3"></a>

## Truncate file

truncate file only retain 10 line


<a id="org7e37aae"></a>

### In-place

```sh
sed -i.bak '11,$ d' myfile.txt
```


<a id="org2230ffb"></a>

### New file

```sh
head -n10 myfile.txt > myfile.txt.bak
```

<https://stackoverflow.com/questions/19017994/how-do-i-limit-or-truncate-text-file-by-number-of-lines>


<a id="orgb2772b8"></a>

## Cut file

```sh
echo "hello world" | cut -b 2-5
```

```sh
ello
```


<a id="orgb9bac7e"></a>

# Emacs


<a id="org66ae86d"></a>

## 给Emacs文档增加目录

给Entry增加标签 =:TOC:=，限定目录层级#+OPTIONS: toc:1


<a id="orga2e98d4"></a>

## Add command to keyboard macro

<https://www.gnu.org/software/emacs/manual/html_node/emacs/Basic-Keyboard-Macro.html> C-u f3 能执行macro直接到按下f4


<a id="orgd452234"></a>

## Set major mode on file

<https://www.gnu.org/software/emacs/manual/html_node/emacs/Choosing-Modes.html>

```emacs-lisp
;; set major mode, with this, other set will be ignore
; -*-Lisp-*-
```


<a id="orgddf36e2"></a>

## Add minor mode on file

```emacs-lisp
; -*- eval: (rainbow-mode) -*-
```


<a id="org59a5ec8"></a>

## Straight use builtin org

将下面的配置加到straight配置前

```emacs-lisp
(straight-use-package '(org :type built-in))
```


<a id="orge65b62b"></a>

## Delete blank line

<https://www.masteringemacs.org/article/removing-blank-lines-buffer>

    M-x flush-lines RET ^$ RET


<a id="orgf3f264f"></a>

## Insert file contents to org source area

In src area, run **C-x i**

```sh
grep 'cool thing' ~/Donwnloads
```


<a id="org90790cc"></a>

## Add note to blog

1.  \#+STARTUP: logdrawer
2.  在需要加note的item执行 **C-c C-z**


<a id="orgf88f777"></a>

## Yas add custom style date

[Insert current date with yasnippet - Emacs Stack Exchange](https://emacs.stackexchange.com/questions/27158/insert-current-date-with-yasnippet)

```emacs-lisp
`(format-time-string "%Y-%m-%d")`$0
```


<a id="orge9f63d1"></a>

## Change org babel export language

[How to change the language of a result of ":results output code" in emacs org-mode - Stack Overflow](https://stackoverflow.com/questions/68085596/how-to-change-the-language-of-a-result-of-results-output-code-in-emacs-org-mo)

```sh
/Users/tomyli/github/today_i_learn
```


<a id="org1eb21c4"></a>

## Ignore error info

```emacs-lisp
(condition-case nil
    (progn
      (message "hello")
    t)
  (error nil)
```


<a id="org302e99a"></a>

## Org babel python output always Nono

[Python org-mode source block output is always ': None' - Emacs Stack Exchange](https://emacs.stackexchange.com/questions/17926/python-org-mode-source-block-output-is-always-none) Can use **return** or add **:results output**


<a id="orgc2935dc"></a>

## Handle swiper search result

Ctrl+s搜索后，再按 **Ctrl+c Ctrl+o** 打开处理结果的buffer


<a id="org0161a4e"></a>

## Change org reveal font color

[org mode - Change font color on a `org-reveal` slide - Emacs Stack Exchange](https://emacs.stackexchange.com/questions/38532/change-font-color-on-a-org-reveal-slide)

1.  Add header

```emacs-lisp
#+MACRO: color @@html:<font color="$1">$2</font>@@
```

1.  Use macro

```emacs-lisp
{{{color(red, 基于2019.1版本.)}}}
```


<a id="org8388de1"></a>

## So-long mode

When a file very big, [so-long](https://elpa.gnu.org/packages/so-long.html) mode can fixed it


<a id="orgf2b7461"></a>

## Trim changed line white space

<https://github.com/redguardtoo/emacs.d/issues/1014> Emacs has an minor mode called [ws-butler-mode](https://github.com/lewang/ws-butler) can trim white space only with changed line.


<a id="org807e2cf"></a>

## Open chrome-extension: prefix url

```emacs-lisp
(setq browse-url-chrome-program "/Applications/Chromium.app/Contents/MacOS/Chromium")
```


<a id="org58959a3"></a>

## Copy rectangle area content

It's useful to yank org table cols without additional custom func. ![img](https://cdn.jsdelivr.net/gh/peng051410/bucket@main/img/copy-rectangle.gif)


<a id="org9c5a0b2"></a>

## Insert stuff like vi column mode but with string-rectangle

<https://twitter.com/i/status/1620721190536114177>


<a id="org31320a8"></a>

# Org hugo add shortcode

Hugo支持短代码形式在生成html时填充模板内容，shortcode配置的html文件放在 **/layouts/shortcodes** 目录下即可，下面的代码就可以实现在博客中嵌入[B站](https://www.bilibili.com/video/BV1pD4y1K7iw/)的视频

Hugo也支持 **begin\_myshortcode** 方式进行嵌入，使用中发现这种形式都是要成对出现的，类似html的闭合标签，目前的使用方式就是 **代码+参数** ，先记住 **export hugo** 方式就可以了


<a id="orgf41bf16"></a>

### [Shortcodes — ox-hugo - Org to Hugo exporter](https://ox-hugo.scripter.co/doc/shortcodes/)

Captured On: <span class="timestamp-wrapper"><span class="timestamp">[2023-01-30 Mon 17:16]</span></span>


<a id="org5fc6c0a"></a>

### [使用Shortcodes在Hugo博客中优雅的嵌入B站视频 – Yu's Blog](https://blog.iyu.icu/posts/shortcode_bilibili/)

Captured On: <span class="timestamp-wrapper"><span class="timestamp">[2023-01-30 Mon 17:10]</span></span>


<a id="org01a6707"></a>

## Batch modify file name in emacs

借助库 [dired](https://www.gnu.org/software/emacs/manual/html_node/emacs/Dired.html) 即可实现，参照 [李杀](http://xahlee.info/emacs/emacs/rename_file_pattern.html) 的教程

![img](https://cdn.jsdelivr.net/gh/peng051410/bucket@main/img/emacs-dired-batch-file.gif)


<a id="org0cc1ec4"></a>

# git


<a id="orgc551853"></a>

## 查看git配置的来源

在正常工作中会针对不同的工作目录设置不同的配置，可以根据以下命令来确认当前仓库使用的配置来源

```sh
git config --show-origin --get user.email
```


<a id="orga568322"></a>

## 删除大于指定大小的仓库信息

迁移仓库时遇到异常，提示镜像文件大于了100M，无法操作，经同事帮助找到此工具，减少仓库信息没得说

```sh
bfg --strip-blobs-bigger-than 100M some-big-repo.git
```


<a id="org6a117a5"></a>

## Rebase user info

```sh
git rebase -i "commit id"
# pick to edit then save change
git commit --amend --author="{username} <{email}>" --no-edit
git rebase --continue
git push
```


<a id="org7a1c981"></a>

## Migrate code to new origin

```sh
git clone --mirror <url_of_old_repo>
git remote add new-origin <url_of_new_repo>
git push new-origin --all
```


<a id="orge8f39c8"></a>

## Remove untracked file

```sh
git clean -xf
```

交互式的进行删除

```sh
git clean -i
```


<a id="org480ca67"></a>

## How to clone git repo wiki

add .wiki after repo


<a id="org274269d"></a>

### clone today\_i\_learn repo

```sh
git clone https://github.com/peng051410/today_i_learn
```


<a id="org14e0953"></a>

### clone today\_i\_learn repo wiki

```sh
git clone https://github.com/peng051410/today_i_learn.wiki
```


<a id="orgc0335ba"></a>

## Create new repo from other existing repo branch

```sh
git push new_repo_address +old_repo_branch:master
```


<a id="org6497f60"></a>

### [git - How do I create a new GitHub repo from a branch in an existing repo? - Stack Overflow](https://stackoverflow.com/questions/9527999/how-do-i-create-a-new-github-repo-from-a-branch-in-an-existing-repo)

Captured On: <span class="timestamp-wrapper"><span class="timestamp">[2023-02-23 Thu 14:22]</span></span>


<a id="org3fa0a74"></a>

# Github


<a id="org4585cd4"></a>

## Add profile page to github

<https://twitter.com/tomylitoo/status/1580396505118441472> Create a repositoy with name same to github name.


<a id="org99b0ff3"></a>

## Github emoji shortcode

<https://github.com/ikatyang/emoji-cheat-sheet>


<a id="org0d1ab8d"></a>

# JAVA


<a id="org6c2ac13"></a>

## How to judge byte[] is compressed with gzip

```java
private boolean isCompressed(byte[] bytes) {
    if ((bytes == null) || (bytes.length < 2)) {
        return false;
    } else {
        return ((bytes[0] == (byte) (GZIPInputStream.GZIP_MAGIC)) && (bytes[1] == (byte) (GZIPInputStream.GZIP_MAGIC
                >> 8)));
    }
}

```


<a id="orgff0e72a"></a>

## Jenv export java\_home

```sh
jenv enable-plugin export
```


<a id="org1faa5fe"></a>

## Iterable to list

```xml
<dependency>
    <groupId>org.apache.commons</groupId>
    <artifactId>commons-collections4</artifactId>
    <version>4.4</version>
</dependency>
```

```java
IterableUtils.toList(list);
```


<a id="orge3ebf69"></a>

## JVM


<a id="orgc7df3f5"></a>

### Show java program jvm params

```sh
jcmd 2886 VM.flags
```


<a id="org7a5802c"></a>

### Why set -XX:NativeMemoryTracking=detail got ative memory tracking is not enabled

Os security, must execute with root [java - Why JCMD throws "native memory tracking is not enabled" message even though NMT is enabled? - Stack Overflow](https://stackoverflow.com/questions/42295509/why-jcmd-throws-native-memory-tracking-is-not-enabled-message-even-though-nmt)


<a id="org3822ab2"></a>

## Get two date interval days by java8

[Calculate days between two Dates in Java 8 - Stack Overflow](https://stackoverflow.com/questions/27005861/calculate-days-between-two-dates-in-java-8)

```java
LocalDate today = LocalDate.now()
LocalDate yesterday = today.minusDays(1);
Duration.between(today.atStartOfDay(), yesterday.atStartOfDay()).toDays() // another option
```


<a id="orgce7c485"></a>

## Convert Milliseconds to LocalDateTime

```java
long millis = 1614926594000L; // UTC Fri Mar 05 2021 06:43:14
LocalDate dateTime = Instant.ofEpochMilli(millis)
        .atZone(ZoneId.systemDefault()) // default zone
        .toLocalDate(); // returns actual LocalDate object
```


<a id="org0812626"></a>

## Convert LocalDate to Milliseconds

```java
ocalDate dateTime1 = LocalDate.of(2021, 3, 5);
long seconds = dateTime1.atStartOfDay(ZoneId.systemDefault())
        .toEpochSecond(); // returns seconds
long millis1 = seconds * 1000; // seconds to milliseconds
```


<a id="orgc371a95"></a>

## com.google.protobuf.GeneratedMessageV3.isStringEmpty not found

need import protobuf-java dependency

```xml
<dependency>
  <groupId>com.google.protobuf</groupId>
  <artifactId>protobuf-java</artifactId>
  <version>3.19.1</version>
</dependency>
```


<a id="org83f236a"></a>

## Get returntype by aspectj joinpoint

```java
Method method = ((MethodSignature) proceedingJoinPoint.getSignature()).getMethod();
Class<?> returnType = method.getReturnType();

//or
Class<?> returnType1 = ((MethodSignature) proceedingJoinPoint.getSignature()).getReturnType();
```


<a id="org0e3aecf"></a>

## SpringFlux+Netty config access log


<a id="orgc5577ed"></a>

### add netty system param

```sh
-Dreactor.netty.http.server.accessLogEnabled=true
```


<a id="orga9c179d"></a>

### config log4j for access log

```xml
<RollingFile name="RollingFileAccess"
             fileName="${sys:logPath}/access.log"
             filePattern="${sys:logPath}/access.log.%d{yyyy-MM-dd_HH}.gz">
  <ThresholdFilter level="INFO"/>
  <PatternLayout>
    <pattern>%d{HH:mm:ss.SSS} %-5level %class{36} %L %M - %msg%xEx%n</pattern>
  </PatternLayout>
  <Policies>
    <TimeBasedTriggeringPolicy/>
  </Policies>
</RollingFile>

<Logger name="reactor.netty.http.server.AccessLog" level="info" additivity="false">
  <AppenderRef ref="RollingFileAccess"/>
</Logger>

```


<a id="org90149a2"></a>

# Spring


<a id="org5e1dfdd"></a>

## How to get handleMethod from webflux

1.  inject handleMapping
2.  you got it!

```java
(HandlerMethod) this.handlerMapping.getHandler(serverWebExchange).toProcessor().peek();
```


<a id="org07e494b"></a>

## Spring profie effect scope

Profiles affect only bean creation, not method.


<a id="org7d201ca"></a>

# KM


<a id="org0569b9b"></a>

## How to show km error log

```sh
tail -f ~/Library/Logs/Keyboard\ Maestro/Engine.log
```


<a id="org4798989"></a>

# Python


<a id="orge4f67dd"></a>

## python with git

```sh
pip3 install GitPython
```


<a id="org87dd03c"></a>

## python with clipboard

```sh
pip3 install pyperclip
```


<a id="org689cf03"></a>

## python urldecode

```python
from urllib.parse import unquote
url = unquote(url)
```


<a id="org1fbf118"></a>

## python with cross-platform home directory

[python - What is a cross-platform way to get the home directory? - Stack Overflow](https://stackoverflow.com/questions/4028904/what-is-a-cross-platform-way-to-get-the-home-directory)

```python
from pathlib import Path
home = str(Path.home())
print(home)
```


<a id="orgfe81347"></a>

## python set to string

```python
s = {'a', 'b'}
str = ', '.join(s)
print(str)
```


<a id="org5c0dcaa"></a>

## python decimal to binary

<https://stackoverflow.com/questions/3528146/convert-decimal-to-binary-in-python>

```python
abinary = bin(1024)
print(abinary)
```


<a id="orgee618f3"></a>

# Brew


<a id="org3a2b0d0"></a>

## get installed program path

```sh
(brew --prefix go)
```


<a id="org8d76f62"></a>

## handle rebase-apply error

```sh
brew update-reset
```


<a id="org0daaefb"></a>

## Make brew python and pyenv togehter

```sh
ln -s $(brew --cellar python)/* ~/.pyenv/versions/
```


<a id="org576b730"></a>

## fixed font exists in multiple taps

[How can I fix Error: font exists in multiple taps ? · Issue #59227 · Homebrew/homebrew-cask](https://github.com/Homebrew/homebrew-cask/issues/59227)

```sh
brew untap caskroom/fonts
brew tap homebrew/cask-fonts
brew cask install font-hack-nerd-font
```


<a id="org3b4e5da"></a>

## Clean brew cache

```sh
brew cleanup -s
```


<a id="orgdead379"></a>

# MAC


<a id="org2735d96"></a>

## del macOS Xcode CoreSimulator folder

```sh
xcrun simctl delete unavailable
```


<a id="org93a6e89"></a>

## Brew mysql install connect issue

因为有老的mysql数据没有清理完全，执行完以下操作后，重新安装即可

```sh
sudo rm -rf /usr/local/var/mysql
```


<a id="org9f5bb84"></a>

## Mount/unmount smbs

```sh
sudo mount -t smbfs '//vagrant:vagrant@localhost:10139/kernel-source' /Volumes
unmont kernel-source
```


<a id="org2e349c1"></a>

## Get running app

```sh
osascript -e 'tell application "System Events" to get name of (processes where background only is false)'
```


<a id="org16743b7"></a>

## Reset macos accessibility

```sh
sudo tccutil reset Accessibility
```


<a id="org3f050df"></a>

# Linux


<a id="org9f0582c"></a>

## Change default program

```sh
update-alternatives --set java java-11-openjdk.x86_64
```

You can issue java path by

```sh
update-alternatives --config java
```


<a id="orgce3b0b7"></a>

## SSH paswordless with public key authentication


<a id="orgea6540f"></a>

### Generate key from host

```sh
ssh-keygen -t rsa
```


<a id="org5831c32"></a>

### Scp to dest machine

```sh
scp .ssh/id_rsa.pub user@host:.
```


<a id="orgf649689"></a>

### Add pub key to dest machine auth key

```sh
cat id_rsa.pub >> .ssh/authorized_keys
```


<a id="org8a0edd8"></a>

## Man with color

[Colored \`man\` pages on OSX](https://gist.github.com/supermarin/6dca255da372c3f9eb26)

```sh
man() {
    env \
        LESS_TERMCAP_mb=$(printf "\e[1;31m") \
        LESS_TERMCAP_md=$(printf "\e[1;31m") \
        LESS_TERMCAP_me=$(printf "\e[0m") \
        LESS_TERMCAP_se=$(printf "\e[0m") \
        LESS_TERMCAP_so=$(printf "\e[1;44;33m") \
        LESS_TERMCAP_ue=$(printf "\e[0m") \
        LESS_TERMCAP_us=$(printf "\e[1;32m") \
        man "$@"
}
```


<a id="org1bd2ef6"></a>

# Mysql


<a id="org8b350c9"></a>

## Show db table create/update time

```sql
select table_name, create_time, update_time
from information_schema.TABLES
where information_schema.TABLES.TABLE_SCHEMA = 'yw_cooperate_oppo' and information_schema.TABLES.TABLE_NAME = 'book_mrg';
show table status like 'book_mrg';
```


<a id="orgcf79f49"></a>

# IDEA


<a id="orgd696048"></a>

## Use alt key quickly on commit window

Alt+i not work, need to use Alt+Ctrl+i


<a id="org22ba190"></a>

# Convert vvt to srt

```sh
ffmpeg -i in.vvt out.srt
```


<a id="org0cf8093"></a>

# Save video part stuff

截取视频的特定时间的内容

```sh
ffmpeg -ss 00:00:03 -i 'original.mp4' -to 00:02:11 -c:v copy -c:a copy part_video.mp4
```

Captured On: <span class="timestamp-wrapper"><span class="timestamp">[2023-02-01 Wed 11:14]</span></span>


<a id="org6da1b58"></a>

# JACKSON


<a id="orga92882d"></a>

## JsonNode to class

```java
MyClass newJsonNode = jsonObjectMapper.treeToValue(someJsonNode, MyClass.class);
```


<a id="org322f530"></a>

## Json to Map

```java
String jsonInput = "{\"key\": \"value\"}";
TypeReference<HashMap<String, String>> typeRef
  = new TypeReference<HashMap<String, String>>() {};
Map<String, String> map = mapper.readValue(jsonInput, typeRef);
```


<a id="org7bd32f0"></a>

## Unwarp map

[java - Jackson HashMap, ignore map name when writing to String - Stack Overflow](https://stackoverflow.com/questions/57312679/jackson-hashmap-ignore-map-name-when-writing-to-string)

```java
private Map<String, TaskStatusDTO> taskMap;

@JsonAnySetter
public void setTaskMap(String key, TaskStatusDTO value) {
    this.taskMap.put(key, value);
}

@JsonAnyGetter
public Map<String, TaskStatusDTO> getTaskMap() {
    return taskMap;
}
```


<a id="orge7234ae"></a>

# Redis


<a id="orga02c961"></a>

## Batch del key

```sh
redis-cli keys "*match" | xargs redis-cli del
```


<a id="org90222ef"></a>

## Find big key

```sh
redis-cli --bigkeys
```


<a id="org61fdb7d"></a>

# Nginx


<a id="orgf296494"></a>

## underscore header issue

Must set **underscores\_in\_headers** to tell nginx not drop it.

```sh
underscores_in_headers on
```

[apache - Why do HTTP servers forbid underscores in HTTP header names - Stack Overflow](https://stackoverflow.com/questions/22856136/why-do-http-servers-forbid-underscores-in-http-header-names)


<a id="orgc9e17da"></a>

# Wexin develop


<a id="orge440656"></a>

## [微信模板消息换行 - Jinx - CSDN博客](https://blog.csdn.net/medivhq/article/details/49659971)


<a id="orgba5fbb6"></a>

## [微信公众号开发者模式回复信息带表情（QQ，emoji） - X\_hazel的博客 - CSDN博客](https://blog.csdn.net/X_hazel/article/details/85206241)


<a id="orgee87df3"></a>

# JS


<a id="orgf632cd4"></a>

## Get table td content

```js
var table = document.getElementById("mytable");
var rows = table.rows;//获取所有行
console.log("lenth",rows.length) //
for(var i=1; i < rows.length; i++){
  var row = rows[i];//获取每一行
  var id = row.cells[1].innerHTML;//获取具体单元格
  console.log(id)
}
```