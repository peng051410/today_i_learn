- [[Quick history](https://github.githistory.xyz/peng051410/today_i_learn/blob/main/README.org)](#orgfe36e40)
- [Command line](#org528e0c6)
  - [打印文本第一行](#org4d61155)
  - [获取文本最后一列](#orgf7af74b)
  - [Delete all broken soft link](#org5c9e782)
  - [Rotate a image](#org393f293)
  - [Nohup to file and console](#orgef226a2)
  - [检验文件或者文件夹是否存在](#org8e74e9e)
    - [判断文件是否存在](#org295445e)
    - [判断文件夹是否存在](#orgbdd1994)
    - [判断软链接存在并且可用虽](#org7a3c070)
    - [判断文件夹不存在](#org2717a2b)
  - [获取本机ip](#org1ae73fd)
  - [Delete file expect few files](#org2a52382)
  - [Sync file from source to target increment](#orgcae83fa)
  - [How to get Maven project version from cmd](#orgb9ae9c6)
  - [Maven use alternative repo](#orgdb7eef9)
  - [Scp with port](#orgf886773)
  - [Check url exist](#org26004bf)
    - [Method1](#org666c184)
    - [Method2](#org52e8a84)
  - [Get host ip](#orga44d2ab)
  - [Generate short link](#org13a2831)
  - [Get weather](#orgc679b6a)
  - [Pass passphrase to gpg](#orgda4be19)
  - [Where xhost](#org1a107a4)
  - [Display custom date](#orgde4ff5a)
  - [Extract filename and extension from file](#org5bf44d3)
  - [Truncate file](#org4400504)
    - [In-place](#org7425b4d)
    - [New file](#orgd93b20e)
  - [Cut file](#org4f46dc8)
- [Emacs](#orga3616da)
  - [给Emacs文档增加目录](#orga75b1a3)
  - [Add command to keyboard macro](#org4aa7b65)
  - [Set major mode on file](#orgde4484f)
  - [Add minor mode on file](#org3eb5558)
  - [Straight use builtin org](#org2e851b1)
  - [Delete blank line](#org3d0b1d6)
  - [Insert file contents to org source area](#org815f7e0)
  - [Add note to blog](#orgd8d831f)
  - [Yas add custom style date](#org618254d)
  - [Change org babel export language](#org0ddd1f2)
  - [Ignore error info](#org0a2fe6d)
  - [Org babel python output always Nono](#org3604828)
  - [Handle swiper search result](#org347e4c0)
  - [Change org reveal font color](#org3d06a16)
  - [So-long mode](#org1d67c88)
  - [Trim changed line white space](#org30c7003)
  - [Open chrome-extension: prefix url](#org7ea3833)
- [Git](#orgec582db)
  - [查看git配置的来源](#org8988af7)
  - [删除大于指定大小的仓库信息](#org46e0f26)
  - [Rebase user info](#orga1ab32b)
  - [Migrate code to new origin](#org0c6a5d6)
  - [Remove untracked file](#orgfe268ed)
  - [How to clone git repo wiki](#orgd80ba99)
    - [clone today<sub>i</sub><sub>learn</sub> repo](#org9b2db8d)
    - [clone today<sub>i</sub><sub>learn</sub> repo wiki](#org19c0f42)
- [Github](#orgf616116)
  - [Add profile page to github](#orgae2ef74)
  - [Github emoji shortcode](#orga032575)
- [JAVA](#org99bb356)
  - [How to judge byte[] is compressed with gzip](#orgd7a90cd)
  - [Jenv export java<sub>home</sub>](#org1720e66)
  - [Iterable to list](#org8e5f8f4)
  - [JVM](#org9654d5e)
    - [Show java program jvm params](#orgf03ebeb)
    - [Why set -XX:NativeMemoryTracking=detail got ative memory tracking is not enabled](#org6c3263c)
  - [Get two date interval days by java8](#orgf131827)
  - [Convert Milliseconds to LocalDateTime](#orge48a972)
  - [Convert LocalDate to Milliseconds](#org5641e8d)
  - [com.google.protobuf.GeneratedMessageV3.isStringEmpty not found](#org9ca8e4e)
  - [Get returntype by aspectj joinpoint](#orgc43bb9b)
- [Spring](#org7898b7d)
  - [How to get handleMethod from webflux](#orgeab9d35)
  - [Spring profie effect scope](#orgebf82b7)
- [KM](#org6cef592)
  - [How to show km error log](#org22d1ad4)
- [Python](#orgeb1c27f)
  - [python with git](#org54dc2eb)
  - [python with clipboard](#org69920d6)
  - [python urldecode](#org99e44e0)
  - [python with cross-platform home directory](#orgf772bfd)
  - [python set to string](#org8148622)
  - [python decimal to binary](#orga0a19ca)
- [Brew](#org20ffc1b)
  - [get installed program path](#orgd5ba5b0)
  - [handle rebase-apply error](#org65a6da3)
  - [Make brew python and pyenv togehter](#org8c407bf)
  - [fixed font exists in multiple taps](#org331b4a6)
- [MAC](#orgf644e87)
  - [del macOS Xcode CoreSimulator folder](#orge94c7dc)
  - [Brew mysql install connect issue](#orged9b0df)
  - [Mount/unmount smbs](#org01163a3)
  - [Get running app](#orge347b9e)
  - [Reset macos accessibility](#orgfde11e4)
- [Linux](#org0824881)
  - [Change default program](#org0a9130e)
  - [SSH paswordless with public key authentication](#org65c9bf5)
    - [Generate key from host](#orgb354c7a)
    - [Scp to dest machine](#org0f52c54)
    - [Add pub key to dest machine auth key](#orge29fefa)
  - [Man with color](#org293e253)
- [Mysql](#org49076d4)
  - [Show db table create/update time](#org33df2a6)
- [IDEA](#orgeab8110)
  - [Use alt key quickly on commit window](#org07a623d)
- [Convert vvt to srt](#orgaef7dc1)
- [JACKSON](#orgafb537d)
  - [JsonNode to class](#orgf073b6c)
  - [Json to Map](#org97284b8)
  - [Unwarp map](#org7d45bd4)
- [Redis](#org666526b)
  - [Batch del key](#org98751d7)
  - [Find big key](#orge9aae79)
- [Nginx](#orgf9d0645)
  - [underscore header issue](#orgc3adcff)
- [Wexin develop](#orgdb30aa0)
  - [[微信模板消息换行 - Jinx - CSDN博客](https://blog.csdn.net/medivhq/article/details/49659971)](#orgc8527a2)
  - [[微信公众号开发者模式回复信息带表情（QQ，emoji） - X<sub>hazel的博客</sub> - CSDN博客](https://blog.csdn.net/X_hazel/article/details/85206241)](#orgf289c71)
- [JS](#org1dce1ad)
  - [Get table td content](#org145dc78)



<a id="orgfe36e40"></a>

# [Quick history](https://github.githistory.xyz/peng051410/today_i_learn/blob/main/README.org)


<a id="org528e0c6"></a>

# Command line


<a id="org4d61155"></a>

## 打印文本第一行

```sh
awk 'NR==1{print}' filename
```


<a id="orgf7af74b"></a>

## 获取文本最后一列

主要是$NF

```sh
awk -F ',' '{print $NF}'
```


<a id="org5c9e782"></a>

## Delete all broken soft link

```sh
find -L . -name . -o -type d -prune -o -type l -exec rm {} +
```


<a id="org393f293"></a>

## Rotate a image

```sh
function ro() {
    szFile=$1
    convert $1 -rotate 90 $(basename "$szFile").png
}
```


<a id="orgef226a2"></a>

## Nohup to file and console

```sh
nohup ./program  > Output.txt | tail -F Output.txt &
```


<a id="org8e74e9e"></a>

## 检验文件或者文件夹是否存在


<a id="org295445e"></a>

### 判断文件是否存在

```sh
if [ -e x.txt ]
then
    echo "ok"
else
    echo "nok"
fi
```


<a id="orgbdd1994"></a>

### 判断文件夹是否存在

```sh
if [ -d folder1 ]
then
    echo "ok"
else
    echo "nok"
fi
```


<a id="org7a3c070"></a>

### 判断软链接存在并且可用虽

```sh
[ -L ${my_link} ] && [ -e ${my_link} ]
```


<a id="org2717a2b"></a>

### 判断文件夹不存在

```sh

```


<a id="org1ae73fd"></a>

## 获取本机ip

```sh
ifconfig | grep -Eo 'inet (addr:)?([0-9]*\.){3}[0-9]*' | grep -Eo '([0-9]*\.){3}[0-9]*' | grep -v '127.0.0.1'
# linux only
hostname -i
```


<a id="org2a52382"></a>

## Delete file expect few files

```sh
rm -v !("filname1"|"file2")
```


<a id="orgcae83fa"></a>

## Sync file from source to target increment

```sh
rsync -av Documents/* /tmp/documents
```


<a id="orgb9ae9c6"></a>

## How to get Maven project version from cmd

```sh
mvn -q -Dexec.executable=echo -Dexec.args='${project.artifactId}' --non-recursive exec:
```


<a id="orgdb7eef9"></a>

## Maven use alternative repo

```sh
mvn -DaltDeploymentRepository=repoid::default::http://ip/nexus/content/repositories/releases clean source:jar-no-fork deploy
```


<a id="orgf886773"></a>

## Scp with port

```sh
scp -P 2222 file host@localhost:~/linux-study
```


<a id="org26004bf"></a>

## Check url exist


<a id="org666c184"></a>

### Method1

```sh
url=http://www.baidu.co
if wget --spider $url 2>/dev/null; then
  echo "File exists"
else
  echo "File does not exist"
fi
```


<a id="org52e8a84"></a>

### Method2

```sh
url=http://www.baidu.co
if wget -q --method=HEAD $url;
 then
  echo "This page exists."
 else
  echo "This page does not exist."
fi
```


<a id="orga44d2ab"></a>

## Get host ip

```sh
curl ipaddy.net
```


<a id="org13a2831"></a>

## Generate short link

```sh
curl -s 'tinyurl.com/api-create.php?url=http://www.baidu.com'
```


<a id="orgc679b6a"></a>

## Get weather

```sh
curl wttr.in
```


<a id="orgda4be19"></a>

## Pass passphrase to gpg

[shell script - gpg asks for password even with &#x2013;passphrase - Unix & Linux Stack Exchange](https://unix.stackexchange.com/questions/60213/gpg-asks-for-password-even-with-passphrase)

```sh
gpg -c --batch --passphrase 1234 -o file.gpg
```


<a id="org1a107a4"></a>

## Where xhost

[x11 - xhost on MacOS Catalina - Ask Different](https://apple.stackexchange.com/questions/378348/xhost-on-macos-catalina)

```sh
/opt/X11/bin/xhost
```


<a id="orgde4ff5a"></a>

## Display custom date

显示3小时之前的时间

```sh
date -d '3 hours ago' +"%Y-%m-%d %T"
# another way
date -d "-3 Hours" "+%Y-%m-%d %T"
```


<a id="org5bf44d3"></a>

## Extract filename and extension from file

<https://stackoverflow.com/questions/965053/extract-filename-and-extension-in-bash?page=1&tab=scoredesc#tab-top>

```sh
fullfile=~/Downloads/main-webapp_log_Onl_jar_backend.yml
filename=$(basename -- "$fullfile")
extension="${filename##*.}"
filename="${filename%.*}"
echo "filanme is $filename, file extendsion is $extension"
```


<a id="org4400504"></a>

## Truncate file

truncate file only retain 10 line


<a id="org7425b4d"></a>

### In-place

```sh
sed -i.bak '11,$ d' myfile.txt
```


<a id="orgd93b20e"></a>

### New file

```sh
head -n10 myfile.txt > myfile.txt.bak
```

<https://stackoverflow.com/questions/19017994/how-do-i-limit-or-truncate-text-file-by-number-of-lines>


<a id="org4f46dc8"></a>

## Cut file

```sh
echo "hello world" | cut -b 2-5
```

```sh
ello
```


<a id="orga3616da"></a>

# Emacs


<a id="orga75b1a3"></a>

## 给Emacs文档增加目录

给Entry增加标签 =:TOC:=，限定目录层级#+OPTIONS: toc:1


<a id="org4aa7b65"></a>

## Add command to keyboard macro

<https://www.gnu.org/software/emacs/manual/html_node/emacs/Basic-Keyboard-Macro.html> C-u f3 能执行macro直接到按下f4


<a id="orgde4484f"></a>

## Set major mode on file

<https://www.gnu.org/software/emacs/manual/html_node/emacs/Choosing-Modes.html>

```emacs-lisp
;; set major mode, with this, other set will be ignore
; -*-Lisp-*-
```


<a id="org3eb5558"></a>

## Add minor mode on file

```emacs-lisp
; -*- eval: (rainbow-mode) -*-
```


<a id="org2e851b1"></a>

## Straight use builtin org

将下面的配置加到straight配置前

```emacs-lisp
(straight-use-package '(org :type built-in))
```


<a id="org3d0b1d6"></a>

## Delete blank line

<https://www.masteringemacs.org/article/removing-blank-lines-buffer>

    M-x flush-lines RET ^$ RET


<a id="org815f7e0"></a>

## Insert file contents to org source area

In src area, run **C-x i**

```sh
grep 'cool thing' ~/Donwnloads
```


<a id="orgd8d831f"></a>

## Add note to blog

1.  \#+STARTUP: logdrawer
2.  在需要加note的item执行 **C-c C-z**


<a id="org618254d"></a>

## Yas add custom style date

[Insert current date with yasnippet - Emacs Stack Exchange](https://emacs.stackexchange.com/questions/27158/insert-current-date-with-yasnippet)

```emacs-lisp
`(format-time-string "%Y-%m-%d")`$0
```


<a id="org0ddd1f2"></a>

## Change org babel export language

[How to change the language of a result of ":results output code" in emacs org-mode - Stack Overflow](https://stackoverflow.com/questions/68085596/how-to-change-the-language-of-a-result-of-results-output-code-in-emacs-org-mo)

```sh
/Users/tomyli/github/today_i_learn
```


<a id="org0a2fe6d"></a>

## Ignore error info

```emacs-lisp
(condition-case nil
    (progn
      (message "hello")
    t)
  (error nil)
```


<a id="org3604828"></a>

## Org babel python output always Nono

[Python org-mode source block output is always ': None' - Emacs Stack Exchange](https://emacs.stackexchange.com/questions/17926/python-org-mode-source-block-output-is-always-none) Can use **return** or add **:results output**


<a id="org347e4c0"></a>

## Handle swiper search result

Ctrl+s搜索后，再按 **Ctrl+c Ctrl+o** 打开处理结果的buffer


<a id="org3d06a16"></a>

## Change org reveal font color

[org mode - Change font color on a `org-reveal` slide - Emacs Stack Exchange](https://emacs.stackexchange.com/questions/38532/change-font-color-on-a-org-reveal-slide)

1.  Add header

```emacs-lisp
#+MACRO: color @@html:<font color="$1">$2</font>@@
```

1.  Use macro

```emacs-lisp
{{{color(red, 基于2019.1版本.)}}}
```


<a id="org1d67c88"></a>

## So-long mode

When a file very big, [so-long](https://elpa.gnu.org/packages/so-long.html) mode can fixed it


<a id="org30c7003"></a>

## Trim changed line white space

<https://github.com/redguardtoo/emacs.d/issues/1014> Emacs has an minor mode called [ws-butler-mode](https://github.com/lewang/ws-butler) can trim white space only with changed line.


<a id="org7ea3833"></a>

## Open chrome-extension: prefix url


<a id="orgec582db"></a>

# Git


<a id="org8988af7"></a>

## 查看git配置的来源

在正常工作中会针对不同的工作目录设置不同的配置，可以根据以下命令来确认当前仓库使用的配置来源

```sh
git config --show-origin --get user.email
```


<a id="org46e0f26"></a>

## 删除大于指定大小的仓库信息

迁移仓库时遇到异常，提示镜像文件大于了100M，无法操作，经同事帮助找到此工具，减少仓库信息没得说

```sh
bfg --strip-blobs-bigger-than 100M some-big-repo.git
```


<a id="orga1ab32b"></a>

## Rebase user info

```sh
git rebase -i "commit id"
# pick to edit then save change
git commit --amend --author="{username} <{email}>" --no-edit
git rebase --continue
git push
```


<a id="org0c6a5d6"></a>

## Migrate code to new origin

```sh
git clone --mirror <url_of_old_repo>
git remote add new-origin <url_of_new_repo>
git push new-origin --all
```


<a id="orgfe268ed"></a>

## Remove untracked file

```sh
git clean -xf
```

交互式的进行删除

```sh
git clean -i
```


<a id="orgd80ba99"></a>

## How to clone git repo wiki

add .wiki after repo


<a id="org9b2db8d"></a>

### clone today<sub>i</sub><sub>learn</sub> repo

```sh
git clone https://github.com/peng051410/today_i_learn
```


<a id="org19c0f42"></a>

### clone today<sub>i</sub><sub>learn</sub> repo wiki

```sh
git clone https://github.com/peng051410/today_i_learn.wiki
```


<a id="orgf616116"></a>

# Github


<a id="orgae2ef74"></a>

## Add profile page to github

<https://twitter.com/tomylitoo/status/1580396505118441472> Create a repositoy with name same to github name.


<a id="orga032575"></a>

## Github emoji shortcode

<https://github.com/ikatyang/emoji-cheat-sheet>


<a id="org99bb356"></a>

# JAVA


<a id="orgd7a90cd"></a>

## How to judge byte[] is compressed with gzip

```java
private boolean isCompressed(byte[] bytes) {
    if ((bytes == null) || (bytes.length < 2)) {
        return false;
    } else {
        return ((bytes[0] == (byte) (GZIPInputStream.GZIP_MAGIC)) && (bytes[1] == (byte) (GZIPInputStream.GZIP_MAGIC
                >> 8)));
    }
}

```


<a id="org1720e66"></a>

## Jenv export java<sub>home</sub>

```sh
jenv enable-plugin export
```


<a id="org8e5f8f4"></a>

## Iterable to list

```xml
<dependency>
    <groupId>org.apache.commons</groupId>
    <artifactId>commons-collections4</artifactId>
    <version>4.4</version>
</dependency>
```

```java
IterableUtils.toList(list);
```


<a id="org9654d5e"></a>

## JVM


<a id="orgf03ebeb"></a>

### Show java program jvm params

```sh
jcmd 2886 VM.flags
```


<a id="org6c3263c"></a>

### Why set -XX:NativeMemoryTracking=detail got ative memory tracking is not enabled

Os security, must execute with root [java - Why JCMD throws "native memory tracking is not enabled" message even though NMT is enabled? - Stack Overflow](https://stackoverflow.com/questions/42295509/why-jcmd-throws-native-memory-tracking-is-not-enabled-message-even-though-nmt)


<a id="orgf131827"></a>

## Get two date interval days by java8

[Calculate days between two Dates in Java 8 - Stack Overflow](https://stackoverflow.com/questions/27005861/calculate-days-between-two-dates-in-java-8)

```java
LocalDate today = LocalDate.now()
LocalDate yesterday = today.minusDays(1);
Duration.between(today.atStartOfDay(), yesterday.atStartOfDay()).toDays() // another option
```


<a id="orge48a972"></a>

## Convert Milliseconds to LocalDateTime

```java
long millis = 1614926594000L; // UTC Fri Mar 05 2021 06:43:14
LocalDate dateTime = Instant.ofEpochMilli(millis)
        .atZone(ZoneId.systemDefault()) // default zone
        .toLocalDate(); // returns actual LocalDate object
```


<a id="org5641e8d"></a>

## Convert LocalDate to Milliseconds

```java
ocalDate dateTime1 = LocalDate.of(2021, 3, 5);
long seconds = dateTime1.atStartOfDay(ZoneId.systemDefault())
        .toEpochSecond(); // returns seconds
long millis1 = seconds * 1000; // seconds to milliseconds
```


<a id="org9ca8e4e"></a>

## com.google.protobuf.GeneratedMessageV3.isStringEmpty not found

need import protobuf-java dependency

```xml
<dependency>
  <groupId>com.google.protobuf</groupId>
  <artifactId>protobuf-java</artifactId>
  <version>3.19.1</version>
</dependency>
```


<a id="orgc43bb9b"></a>

## Get returntype by aspectj joinpoint

```java
Method method = ((MethodSignature) proceedingJoinPoint.getSignature()).getMethod();
Class<?> returnType = method.getReturnType();

//or
Class<?> returnType1 = ((MethodSignature) proceedingJoinPoint.getSignature()).getReturnType();
```


<a id="org7898b7d"></a>

# Spring


<a id="orgeab9d35"></a>

## How to get handleMethod from webflux

1.  inject handleMapping
2.  you got it!

```java
(HandlerMethod) this.handlerMapping.getHandler(serverWebExchange).toProcessor().peek();
```


<a id="orgebf82b7"></a>

## Spring profie effect scope

Profiles affect only bean creation, not method.


<a id="org6cef592"></a>

# KM


<a id="org22d1ad4"></a>

## How to show km error log

```sh
tail -f ~/Library/Logs/Keyboard\ Maestro/Engine.log
```


<a id="orgeb1c27f"></a>

# Python


<a id="org54dc2eb"></a>

## python with git

```sh
pip3 install GitPython
```


<a id="org69920d6"></a>

## python with clipboard

```sh
pip3 install pyperclip
```


<a id="org99e44e0"></a>

## python urldecode

```python
from urllib.parse import unquote
url = unquote(url)
```


<a id="orgf772bfd"></a>

## python with cross-platform home directory

[python - What is a cross-platform way to get the home directory? - Stack Overflow](https://stackoverflow.com/questions/4028904/what-is-a-cross-platform-way-to-get-the-home-directory)

```python
from pathlib import Path
home = str(Path.home())
print(home)
```


<a id="org8148622"></a>

## python set to string

```python
s = {'a', 'b'}
str = ', '.join(s)
print(str)
```


<a id="orga0a19ca"></a>

## python decimal to binary

<https://stackoverflow.com/questions/3528146/convert-decimal-to-binary-in-python>

```python
abinary = bin(1024)
print(abinary)
```


<a id="org20ffc1b"></a>

# Brew


<a id="orgd5ba5b0"></a>

## get installed program path

```sh
(brew --prefix go)
```


<a id="org65a6da3"></a>

## handle rebase-apply error

```sh
brew update-reset
```


<a id="org8c407bf"></a>

## Make brew python and pyenv togehter

```sh
ln -s $(brew --cellar python)/* ~/.pyenv/versions/
```


<a id="org331b4a6"></a>

## fixed font exists in multiple taps

[How can I fix Error: font exists in multiple taps ? · Issue #59227 · Homebrew/homebrew-cask](https://github.com/Homebrew/homebrew-cask/issues/59227)

```sh
brew untap caskroom/fonts
brew tap homebrew/cask-fonts
brew cask install font-hack-nerd-font
```


<a id="orgf644e87"></a>

# MAC


<a id="orge94c7dc"></a>

## del macOS Xcode CoreSimulator folder

```sh
xcrun simctl delete unavailable
```


<a id="orged9b0df"></a>

## Brew mysql install connect issue

因为有老的mysql数据没有清理完全，执行完以下操作后，重新安装即可

```sh
sudo rm -rf /usr/local/var/mysql
```


<a id="org01163a3"></a>

## Mount/unmount smbs

```sh
sudo mount -t smbfs '//vagrant:vagrant@localhost:10139/kernel-source' /Volumes
unmont kernel-source
```


<a id="orge347b9e"></a>

## Get running app

```sh
osascript -e 'tell application "System Events" to get name of (processes where background only is false)'
```


<a id="orgfde11e4"></a>

## Reset macos accessibility

```sh
sudo tccutil reset Accessibility
```


<a id="org0824881"></a>

# Linux


<a id="org0a9130e"></a>

## Change default program

```sh
update-alternatives --set java java-11-openjdk.x86_64
```

You can issue java path by

```sh
update-alternatives --config java
```


<a id="org65c9bf5"></a>

## SSH paswordless with public key authentication


<a id="orgb354c7a"></a>

### Generate key from host

```sh
ssh-keygen -t rsa
```


<a id="org0f52c54"></a>

### Scp to dest machine

```sh
scp .ssh/id_rsa.pub user@host:.
```


<a id="orge29fefa"></a>

### Add pub key to dest machine auth key

```sh
cat id_rsa.pub >> .ssh/authorized_keys
```


<a id="org293e253"></a>

## Man with color

[Colored \`man\` pages on OSX](https://gist.github.com/supermarin/6dca255da372c3f9eb26)

```sh
man() {
    env \
        LESS_TERMCAP_mb=$(printf "\e[1;31m") \
        LESS_TERMCAP_md=$(printf "\e[1;31m") \
        LESS_TERMCAP_me=$(printf "\e[0m") \
        LESS_TERMCAP_se=$(printf "\e[0m") \
        LESS_TERMCAP_so=$(printf "\e[1;44;33m") \
        LESS_TERMCAP_ue=$(printf "\e[0m") \
        LESS_TERMCAP_us=$(printf "\e[1;32m") \
        man "$@"
}
```


<a id="org49076d4"></a>

# Mysql


<a id="org33df2a6"></a>

## Show db table create/update time

```sql
select table_name, create_time, update_time
from information_schema.TABLES
where information_schema.TABLES.TABLE_SCHEMA = 'yw_cooperate_oppo' and information_schema.TABLES.TABLE_NAME = 'book_mrg';
show table status like 'book_mrg';
```


<a id="orgeab8110"></a>

# IDEA


<a id="org07a623d"></a>

## Use alt key quickly on commit window

Alt+i not work, need to use Alt+Ctrl+i


<a id="orgaef7dc1"></a>

# Convert vvt to srt

```sh
ffmpeg -i in.vvt out.srt
```


<a id="orgafb537d"></a>

# JACKSON


<a id="orgf073b6c"></a>

## JsonNode to class

```java
MyClass newJsonNode = jsonObjectMapper.treeToValue(someJsonNode, MyClass.class);
```


<a id="org97284b8"></a>

## Json to Map

```java
String jsonInput = "{\"key\": \"value\"}";
TypeReference<HashMap<String, String>> typeRef
  = new TypeReference<HashMap<String, String>>() {};
Map<String, String> map = mapper.readValue(jsonInput, typeRef);
```


<a id="org7d45bd4"></a>

## Unwarp map

[java - Jackson HashMap, ignore map name when writing to String - Stack Overflow](https://stackoverflow.com/questions/57312679/jackson-hashmap-ignore-map-name-when-writing-to-string)

```java
private Map<String, TaskStatusDTO> taskMap;

@JsonAnySetter
public void setTaskMap(String key, TaskStatusDTO value) {
    this.taskMap.put(key, value);
}

@JsonAnyGetter
public Map<String, TaskStatusDTO> getTaskMap() {
    return taskMap;
}
```


<a id="org666526b"></a>

# Redis


<a id="org98751d7"></a>

## Batch del key

```sh
redis-cli keys "*match" | xargs redis-cli del
```


<a id="orge9aae79"></a>

## Find big key

```sh
redis-cli --bigkeys
```


<a id="orgf9d0645"></a>

# Nginx


<a id="orgc3adcff"></a>

## underscore header issue

Must set **underscores<sub>in</sub><sub>headers</sub>** to tell nginx not drop it.

```sh
underscores_in_headers on
```

[apache - Why do HTTP servers forbid underscores in HTTP header names - Stack Overflow](https://stackoverflow.com/questions/22856136/why-do-http-servers-forbid-underscores-in-http-header-names)


<a id="orgdb30aa0"></a>

# Wexin develop


<a id="orgc8527a2"></a>

## [微信模板消息换行 - Jinx - CSDN博客](https://blog.csdn.net/medivhq/article/details/49659971)


<a id="orgf289c71"></a>

## [微信公众号开发者模式回复信息带表情（QQ，emoji） - X<sub>hazel的博客</sub> - CSDN博客](https://blog.csdn.net/X_hazel/article/details/85206241)


<a id="org1dce1ad"></a>

# JS


<a id="org145dc78"></a>

## Get table td content

```js
var table = document.getElementById("mytable");
var rows = table.rows;//获取所有行
console.log("lenth",rows.length) //
for(var i=1; i < rows.length; i++){
  var row = rows[i];//获取每一行
  var id = row.cells[1].innerHTML;//获取具体单元格
  console.log(id)
}
```